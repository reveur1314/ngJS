<!DOCTYPE html>
<!-- saved from url=(0044)http://www.angularjs.net.cn/tutorial/14.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" charset="utf-8" async="" src="./19.AngularJS $location_files/pa_links_new2_cs_colorconfigurable.app.js.下载"></script>
<title>AngularJS $location</title>
<link rel="icon" href="http://www.angularjs.net.cn/Application/Home/View/Public/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="./19.AngularJS $location_files/bootstrap.min.css">
<link href="./19.AngularJS $location_files/prettify.css" rel="stylesheet">
<script src="./19.AngularJS $location_files/hm.js.下载"></script><script src="./19.AngularJS $location_files/prettify.js.下载"></script>


<link rel="stylesheet" href="./19.AngularJS $location_files/style.css">

</head>
<body onload="prettyPrint()">
<div id="top">
	<div class="container">
	<div class="logo"><a href="http://www.angularjs.net.cn/">AngularJs中文网</a></div>
	<ul>
		<li><a href="http://www.angularjs.net.cn/">首页</a></li>
		<li><a href="http://www.angularjs.net.cn/tutorial/">AngularJS 教程</a></li>
		
		<li><a href="http://www.angularjs.net.cn/phonecat/">AngularJS PhoneCat</a></li>
		<li><a href="http://www.angularjs.net.cn/download/">AngularJS 下载</a></li>
		<li><a href="http://www.angularjs.net.cn/api/">AngularJS api</a></li>
		<li style="display:none;"><a href="http://www.angularjs.net.cn/angular-seed">AngularJS Seed</a></li>
	<li><a href="https://promotion.aliyun.com/ntms/act/qwbk.html?userCode=iuvvbh9n" onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;nav&#39;, &#39;click&#39;, &#39;Ecs&#39;])" target="_blank">Ecs服务器</a></li>
	

	
	</ul>
	</div>
</div>


<div class="container">
	<div class="row">
		<div class="col-md-3">
<ul>
	<li><a href="http://www.angularjs.net.cn/tutorial/1.html">简介（Introduction）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/16.html">引导程序（Bootstrap）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/18.html">概念概述(Conceptual Overview)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/15.html">Html编译（HTML Compiler）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/10.html">数据绑定（Data Binding）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/2.html">控制器(Controllers)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/19.html">服务（Services）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/12.html">作用域(Scope)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/17.html">依赖注入(Dependency Injection)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/13.html">模板（Templates）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/11.html">使用css(Working With CSS)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/8.html">过滤器（Filters）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/4.html">表单(Forms)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/5.html">指令(Directives)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/20.html">Components</a></li><li><a href="http://www.angularjs.net.cn/tutorial/21.html">Component Router</a></li><li><a href="http://www.angularjs.net.cn/tutorial/7.html">动画(Animations)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/6.html">模块(Modules)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/3.html">表达式(Expressions)</a></li><li><a href="http://www.angularjs.net.cn/tutorial/9.html">供应者（Providers）</a></li><li><a href="http://www.angularjs.net.cn/tutorial/14.html">$location</a></li><li><a href="http://www.angularjs.net.cn/tutorial/22.html">单元测试</a></li><li><a href="http://www.angularjs.net.cn/tutorial/23.html">端对端测试</a></li></ul>
<div id="ad">
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 160x600 -->
<ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-6117966252207595" data-ad-slot="1088261149"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
		<div class="col-md-9">
			<div class="page-header"><h1>AngularJS $location</h1></div>

<div style="margin-bottom:10px;">
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 728x90 --><ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-6117966252207595" data-ad-slot="2639707541"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 728x90 --><ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-6117966252207595" data-ad-slot="2639707541"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
			
			
	
		

<p><code>$location</code>服务负责解析浏览器地址栏中的URL（基于<a href="https://developer.mozilla.org/en/window.location">window.location</a>），以便你的应用可以访问它。
    这是一个双向同步机制 —— 对地址栏URL的任何修改都会被映射到$location服务中，对$location的任何修改也同样会被映射到地址栏。</p>
<p><strong>$location服务：</strong></p>
<ul>
    <li>导出在浏览器地址栏中的当前地址，以便你<ul>
        <li>监视与观察此地址的变更</li>
        <li>修改URL</li>
    </ul>
    </li>
    <li>当用户做下列操作时，维持<code>$location</code>和浏览器当前URL之间的同步<ul>
        <li>在浏览器地址栏中修改地址</li>
        <li>在浏览器中点击前进、后退按钮，或点击“历史”中的链接</li>
        <li>在页面上点击一个链接</li>
    </ul>
    </li>
    <li>把URL对象表示成一组方法（protocol, host, port, path, search, hash）</li>
</ul>
<h3 id="$location是做什么的？_$location和windowlocation的对比">$location和window.location的对比</h3>
<table class="table table-bordered table-striped">
    <thead>

    <tr>
        <th class="empty-corner-lt"></th>
        <th>window.location</th>
        <th>$location服务</th>
    </tr>

    </thead>
    <tbody>

    <tr>
        <td class="head">用途</td>
        <td>允许你访问浏览器的当前地址</td>
        <td>相同</td>
    </tr>

    <tr>
        <td class="head">API</td>
        <td>导出带有属性的“原始”对象，它可以被直接修改</td>
        <td>导出jQuery风格的setter和getter方法</td>
    </tr>

    <tr>
        <td class="head">和Angular应用的生命周期整合在一起</td>
        <td>无</td>
        <td>了解所有Angular生命周期中的各个阶段，与$watch集成 ...</td>
    </tr>

    <tr>
        <td class="head">与HTML5 API无缝整合</td>
        <td>否</td>
        <td>是（对老浏览器，具有退回机制，译注：新式使用Push State API，老式使用#hashbang方式）</td>
    </tr>

    <tr>
        <td class="head">带有应用宿主页面的上下文(context)路径</td>
        <td>否 - window.location.path将返回"/docroot/actual/path"</td>
        <td>是 - $location.path()返回"/actual/path"</td>
    </tr>

    </tbody>
</table>

<h3 id="$location是做什么的？_我该什么时候使用$location？">我该什么时候使用$location？</h3>
<p>只要你的应用想更改当前地址，或者你想要修改浏览器的当前地址，就用它吧！</p>
<h3 id="$location是做什么的？_什么时候不该用它？">什么时候不该用它？</h3>
<p>在浏览器地址变化的时候，它不会导致全页面刷新。要想在地址变化之后重载整个页面，请使用底层API<code>$window<span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">href</span></code>。</p>

<hr><h2 id="api的通用概览">API的通用概览</h2>
<p><code>$location</code>服务可能具有不同的行为，这取决于它被实例化时候你提供给它的配置。默认的配置适用于很多应用，而自定义的配置可以让你启用一些新特性。</p>
<p>一旦<code>$location</code>服务被实例化了，你能通过jQuery风格的getter或setter方法与它互动，这样你就能获取或修改浏览器中的当前URL了。</p>
<h3 id="api的通用概览_$location服务配置">$location服务配置</h3>
<p>要想配置<code>$location</code>服务，应该获取<a href="http://www.angularjs.net.cn/tutorial/api/ng.$locationProvider"><code>$locationProvider</code></a>对象，然后按下面的方法设置它的参数：</p>
<ul>
    <li><p><strong>html5Mode(模式)</strong>: {boolean}<br>
        <code><span class="kwd">true</span></code> - 参见下文中的“HTML5模式”<br>
        <code><span class="kwd">false</span></code> - 参见下文中的“Hashbang模式”<br>
        默认值: <code><span class="kwd">false</span></code></p>
    </li>
    <li><p><strong>hashPrefix(前缀)</strong>: {string}<br>
        Hashbang的URL前缀（用于Hashbang模式或者使用Html5模式但运行在老式浏览器中）<br>
        默认值: <code><span class="str">""</span></code>（空字符串）</p>
    </li>
</ul>
<h4 id="api的通用概览_$location服务配置_范例配置">范例配置</h4>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">$locationProvider</span><span class="pun">.</span><span class="pln">html5Mode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">).</span><span class="pln">hashPrefix</span><span class="pun">(</span><span class="str">'!'</span><span class="pun">);</span></li></ol></pre>
<h3 id="api的通用概览_getter和setter方法">Getter和setter方法</h3>
<p><code><span class="pun">对于地址中的只读部分（</span><span class="pln">absUrl</span><span class="pun">,</span><span class="pln"> protocol</span><span class="pun">,</span><span class="pln"> host</span><span class="pun">,</span><span class="pln">
    port</span><span class="pun">），</span><span class="pln">$location</span></code>服务提供getter方法，对于可变部分（url, path, search, hash），则同时提供getter和setter方法。
</p><pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">// 或的当前path</span></li><li class="L1"><span class="pln">$location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">();</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">// 修改当前path</span></li><li class="L4"><span class="pln">$location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/newValue'</span><span class="pun">)</span></li></ol></pre>
<p>所有的setter方法都返回同一个<code>$location</code>对象，以便你进行链式调用。例如，要想一次性修改地址中的几个字段，可以用这样的语法把几个setter串起来：
</p><pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">$location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/newValue'</span><span class="pun">).</span><span class="pln">search</span><span class="pun">({</span><span class="pln">key</span><span class="pun">:</span><span class="pln"> value</span><span class="pun">});</span></li></ol></pre>
<h3 id="api的通用概览_replace方法">replace方法</h3>
<p>有一个特殊的<code>replace</code>方法，用来告诉$location服务：你下次和浏览器同步的时候，应该用新地址“替代”最后一条历史记录而不是“追加”新纪录。这在你实现重定向的时候很有用，否则它将“玩死”浏览器的“后退”按钮（“后退”立刻触发一次重定向，我胡汉三又回来了！）。要想改变当前地址却不创建新历史记录，你可以这样调用：</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">  $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/someNewPath'</span><span class="pun">);</span></li><li class="L1"><span class="pln">  $location</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">();</span></li><li class="L2"><span class="pln">  </span><span class="com">// 你也可以像这样把它们串起来：$location.path('/someNewPath').replace();</span></li></ol></pre>
<p>注意，setter方法不会立刻更新<code>window<span class="pun">.</span><span class="pln">location</span></code>。反之，<code>$location</code>服务是挂在与<a href="http://www.angularjs.net.cn/tutorial/api/ng.$rootScope.Scope"><code><span class="pun">作用域(</span><span class="pln">scope</span><span class="pun">)</span></code></a>的生命周期中的，它会在作用域的<code>$digest</code>阶段把多个<code>$location</code>调用合并到一起，然后“提交”到<code>window<span class="pun">.</span><span class="pln">location</span><span class="pun">对象中。由于对</span><span class="pln">$location</span><span class="pun">的状态的多次修改会被合并成一次修改通知浏览器，在一个生命周期内你只要调用了一次</span></code>replace<code><span class="pun">操作就可以“提交”一个</span><span class="pln">replace</span><span class="pun">操作(“替换”而不是“追加”历史记录)。浏览器地址一旦被更新，</span><span class="pln">$location</span><span class="pun">服务器就会重置</span></code>replace()<code><span class="pun">方法设置的标识，将来的修改将会追加新的历史记录，除非再次调用</span></code>replace()`。</p>
<h4 id="api的通用概览_replace方法_setter和字符编码">setter和字符编码</h4>
<p>你可以给<code>$location</code>服务传入特殊字符，它将根据<a href="http://www.ietf.org/rfc/rfc3986.txt">RFC 3986</a>中指定的规则进行编码。
    这会在执行下列方法时自动触发：</p>
<ul>
    <li>所有通过<code>$location</code>的setter方法（<code>path<span class="pun">()</span></code>, <code>search<span class="pun">()</span></code>, <code>hash<span class="pun">()</span></code>）传入的值都将被编码。</li>
    <li>getter方法（不带任何参数调用<code>path<span class="pun">()</span></code>, <code>search<span class="pun">()</span></code>, <code>hash<span class="pun">()</span></code>方法）返回的值将被解码。</li>
    <li>调用<code>absUrl<span class="pun">()</span></code>方法的返回值是一个编码过的字符串。</li>
    <li>调用<code>url<span class="pun">()</span></code>方法返回的值是path，search和hash，形如<code><span class="pun">/</span><span class="pln">path</span><span class="pun">?</span><span class="pln">search</span><span class="pun">=</span><span class="pln">a</span><span class="pun">&amp;</span><span class="pln">b</span><span class="pun">=</span><span class="pln">c</span><span class="com">#hash</span></code>，各个组成部分也都是编码过的。</li>
</ul>
<hr>
<hr><h2 id="hashbang和html5模式">Hashbang和HTML5模式</h2>
<p><code>$location</code>服务有两种配置模式，它将控制浏览器地址栏中的地址显示格式：<strong>Hashbang模式</strong>（默认）和<strong>HTML5模式</strong>，
    后者基于HTML5的<a href="http://www.w3.org/TR/html5/history.html">历史(history)API</a>。无论哪种模式，应用层都使用相同的API，
    <code>$location</code>服务会自己找出合适的URL格式和浏览器API，来完成修改浏览器地址和进行历史管理的工作。</p>
<p><img src="./19.AngularJS $location_files/hashbang_vs_regular_url.jpg"></p>
<table class="table table-bordered table-striped">
    <thead>

    <tr>
        <th class="empty-corner-lt"></th>
        <th>Hashbang模式</th>
        <th>HTML5模式</th>
    </tr>

    </thead>
    <tbody>

    <tr>
        <td class="head">配置项</td>
        <td>默认</td>
        <td>{ html5Mode: true }</td>
    </tr>

    <tr>
        <td class="head">URL格式</td>
        <td>在所有浏览器中使用hashbang格式</td>
        <td>现代浏览器中使用标准URL格式，老式浏览器中使用hashbang格式</td>
    </tr>

    <tr>
        <td class="head">&lt;a href=""&gt; link重写</td>
        <td>否</td>
        <td>是</td>
    </tr>

    <tr>
        <td class="head">需要服务端配置</td>
        <td>否</td>
        <td>是</td>
    </tr>
    </tbody>
</table>

<h3 id="hashbang和html5模式_hashbang模式">Hashbang模式(缺省模式)</h3>
<p>在这种模式中，<code>$location</code>在所有浏览器中都使用Hashbang地址</p>
<h4 id="hashbang和html5模式_hashbang模式_范例">范例</h4>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">it</span><span class="pun">(</span><span class="str">'显示范例'</span><span class="pun">,</span><span class="pln"> inject</span><span class="pun">(</span></li><li class="L1"><span class="pln">  </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$locationProvider</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">    $locationProvider</span><span class="pun">.</span><span class="pln">html5Mode</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span></li><li class="L3"><span class="pln">    $locationProvider</span><span class="pun">.</span><span class="pln">hashPrefix</span><span class="pun">(</span><span class="str">'!'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  </span><span class="pun">},</span></li><li class="L5"><span class="pln">  </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$location</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">    </span><span class="com">// 打开http://example.com/base/index.html#!/a</span></li><li class="L7"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/base/index.html#!/a'</span></li><li class="L8"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'/a'</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/foo'</span><span class="pun">)</span></li><li class="L1"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/base/index.html#!/foo'</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">search</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">{}</span></li><li class="L4"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">search</span><span class="pun">({</span><span class="pln">a</span><span class="pun">:</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">});</span></li><li class="L5"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/base/index.html#!/foo?a=b&amp;c'</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/new'</span><span class="pun">).</span><span class="pln">search</span><span class="pun">(</span><span class="str">'x=y'</span><span class="pun">);</span></li><li class="L8"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/base/index.html#!/new?x=y'</span></li><li class="L9"><span class="pln">  </span><span class="pun">}</span></li><li class="L0"><span class="pun">));</span></li></ol></pre>
<h4 id="hashbang和html5模式_hashbang模式_把应用献给爬虫">把应用献给爬虫</h4>
<p>要想让你的Ajax应用能够被搜索引擎找到，你必须在HTML文档的head部分添加一个特殊的meta标记：
</p><pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"fragment"</span><span class="pln"> </span><span class="atn">content</span><span class="pun">=</span><span class="atv">"!"</span><span class="pln"> </span><span class="tag">/&gt;</span></li></ol></pre>
<p>这将导致爬虫机器人使用<code>_escaped_fragment_</code>参数请求你的链接，以便你的服务器能识别出爬虫，并且给他一个HTML快照。
    更多信息，参见<a href="http://code.google.com/web/ajaxcrawling/docs/specification.html">让Ajax应用也能被抓取</a>。</p>
<h3 id="hashbang和html5模式_html5模式">HTML5模式</h3>
<p>在HTML5模式中，<code>$location</code>服务的getter和setter方法通过HTML5 history API与浏览器地址栏互动，
    它允许你使用标准的URL path和search格式来代替等价的hashbang模式。如果浏览器不支持HTML5 history API，
    那么<code>$location</code>服务将自动退回到使用hashbang URL。这将把你从担心用户的浏览器是否支持history API中解放出来，
    <code>$location</code>服务将会透明的帮你选择最佳的可用形式。</p>
<ul>
    <li>在一个老式浏览器中使用标准url格式 -&gt; 重定向到hashbang URL</li>
    <li>在一个现代浏览器中使用hashbang格式 -&gt; 用标准URL形式进行重写</li>
</ul>
<h4 id="hashbang和html5模式_html5模式_范例">范例</h4>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">it</span><span class="pun">(</span><span class="str">'显示范例'</span><span class="pun">,</span><span class="pln"> inject</span><span class="pun">(</span></li><li class="L1"><span class="pln">  </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$locationProvider</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">    $locationProvider</span><span class="pun">.</span><span class="pln">html5Mode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L3"><span class="pln">    $locationProvider</span><span class="pun">.</span><span class="pln">hashPrefix</span><span class="pun">(</span><span class="str">'!'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  </span><span class="pun">},</span></li><li class="L5"><span class="pln">  </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$location</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">    </span><span class="com">// 在支持HTML5历史API的浏览器中:</span></li><li class="L7"><span class="pln">    </span><span class="com">// 打开 http://example.com/#!/a -&gt; 将被重写为 http://example.com/a</span></li><li class="L8"><span class="pln">    </span><span class="com">// (替换 http://example.com/#!/a 的历史记录)</span></li><li class="L9"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'/a'</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/foo'</span><span class="pun">);</span></li><li class="L2"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/foo'</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">search</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">{}</span></li><li class="L5"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">search</span><span class="pun">({</span><span class="pln">a</span><span class="pun">:</span><span class="pln"> </span><span class="str">'b'</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">});</span></li><li class="L6"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/foo?a=b&amp;c'</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/new'</span><span class="pun">).</span><span class="pln">search</span><span class="pun">(</span><span class="str">'x=y'</span><span class="pun">);</span></li><li class="L9"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">url</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'new?x=y'</span></li><li class="L0"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/new?x=y'</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    </span><span class="com">// 在不支持HTML5历史API的浏览器中:</span></li><li class="L3"><span class="pln">    </span><span class="com">// 打开 http://example.com/new?x=y -&gt; 将被重定向到 http://example.com/#!/new?x=y</span></li><li class="L4"><span class="pln">    </span><span class="com">// (替换 http://example.com/new?x=y 的历史记录)</span></li><li class="L5"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'/new'</span></li><li class="L6"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">search</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">{</span><span class="pln">x</span><span class="pun">:</span><span class="pln"> </span><span class="str">'y'</span><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/foo/bar'</span><span class="pun">);</span></li><li class="L9"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'/foo/bar'</span></li><li class="L0"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">url</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'/foo/bar?x=y'</span></li><li class="L1"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">absUrl</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'http://example.com/#!/foo/bar?x=y'</span></li><li class="L2"><span class="pln">  </span><span class="pun">}</span></li><li class="L3"><span class="pun">));</span></li></ol></pre>
<h4 id="hashbang和html5模式_html5模式_退回到老式浏览器">退回到老式浏览器</h4>
<p>对于支持HTML5 history API的浏览器，<code>$location</code>使用HTML5 history API来修改path和search部分。
    如果浏览器不支持history API，<code>$location</code>提供hashbang URL。这会把你从不得不担心用户的浏览器是否支持history API中解放出来，
    <code>$location</code>服务为你透明的完成这一切。</p>
<h4 id="hashbang和html5模式_html5模式_html链接重写">HTML链接重写</h4>
<p>如果你正在使用HTML5 history API模式，你需要在不同的浏览器中使用不同的链接，但是你要做的只是制定一个标准URL链接形式，
    比如：<code><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/some?foo=bar"</span><span class="tag">&gt;</span><span class="pln">某链接</span><span class="tag">&lt;/a&gt;</span></code></p>
<p>当用户点击这个链接时，</p>
<ul>
    <li>在老式浏览器中，地址变为<code><span class="str">/index.html#!/</span><span class="pln">some</span><span class="pun">?</span><span class="pln">foo</span><span class="pun">=</span><span class="pln">bar</span></code></li>
    <li>在现代浏览器中，地址变为<code><span class="pun">/</span><span class="pln">some</span><span class="pun">?</span><span class="pln">foo</span><span class="pun">=</span><span class="pln">bar</span></code></li>
</ul>
<p>在下面的例子中，链接不会被重写，而是会在当前页面中执行一次全页面刷新。</p>
<ul>
    <li>链接包含<code>target</code>属性<br>
        例如： <code><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/ext/link?a=b"</span><span class="pln"> </span><span class="atn">target</span><span class="pun">=</span><span class="atv">"_self"</span><span class="tag">&gt;</span><span class="pln">某链接</span><span class="tag">&lt;/a&gt;</span></code></li>
    <li>指向其他域名的绝对链接<br>
        例如: <code><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://angularjs.org/"</span><span class="tag">&gt;</span><span class="pln">某链接</span><span class="tag">&lt;/a&gt;</span></code></li>
    <li>当通过base元素定义了页面基地址时，以'/'开头，但是指向其他基地址的链接<br>
        例如: <code><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/not-my-base/link"</span><span class="tag">&gt;</span><span class="pln">某链接</span><span class="tag">&lt;/a&gt;</span></code></li>
</ul>
<p>当在域名的根路径下运行Angular时，可能还有其他普通应用在同一个目录下，"otherwise"路由将会尝试处理所有URL，
    甚至包括映射到静态文件的那些。</p>
<p>要想阻止这种行为，你可以把你的base元素的href属性到<code><span class="tag">&lt;base</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"."</span><span class="tag">&gt;</span></code>，然后，给所有应该由你处理的链接加上<code><span class="pun">.</span></code>前缀。
    这样，那些没有用<code><span class="pun">.</span></code>做前缀的地址将不会再被Angular路由，也就不会再被你的<code>$routeProvider</code>中配置的<code>otherwise</code>规则拦截到了。</p>
<h4 id="hashbang和html5模式_html5模式_服务端">服务端</h4>
<p>使用HTML5模式需要在服务端重写URL，通常，你要把所有链接都转给应用的入口点（比如index.html）。</p>
<h4 id="hashbang和html5模式_html5模式_让爬虫抓取你的应用">让爬虫抓取你的应用</h4>
<p>如果你想你的AJAX应用被web爬虫索引到，你需要添加下列meta标签到你文档中的HEAD区：
</p><pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"fragment"</span><span class="pln"> </span><span class="atn">content</span><span class="pun">=</span><span class="atv">"!"</span><span class="pln"> </span><span class="tag">/&gt;</span></li></ol></pre>
<p>这个语句会导致爬虫在请求链接时带上一个空的<code>_escaped_fragment_</code>参数，以便你的服务器可以识别出爬虫，
    并且给它提供一个HTML快照。更多信息，参见<a href="http://code.google.com/web/ajaxcrawling/docs/specification.html">让AJAX应用可以被抓取</a></p>
<h4 id="hashbang和html5模式_html5模式_相对链接">相对链接</h4>
<p>注意检查所有相对链接、图片、脚本等。你或者要在主页面的head区通过<code><span class="tag">&lt;base</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/my-base"</span><span class="tag">&gt;</span></code>指定一个url基地址，或者到处使用绝对路径（用<code><span class="pun">/</span></code>开头的）。
    因为相对路径将根据当前页面的初始绝对地址解析为绝对路径，而这通常与此应用的根路径是不同的。</p>
<p>强烈建议在根路径下运行使用HTML5历史API模式的Angular应用，它会处理好所有关于相对路径的问题。</p>
<hr>
<h4>在不同的浏览器中使用链接</h4>
<p>因为HTML5模式下的路径重写能力，你的用户也可以在老式浏览器中打开标准url链接，或者在现代浏览器中打开hashbang链接：</p>
<ul>
    <li>现代浏览器将会使用标准URL形式重写hashbang地址。</li>
    <li>老式浏览器将会把标准URL重定向到hashbang URL。</li>
</ul>
<h4 id="hashbang和html5模式_html5模式_范例">范例</h4>
<p>接下来你将看到两个<code>$location</code>实例。全都使用<strong>HTML5模式</strong>但运行于不同的浏览器,你将看到它们的区别。
    这两个<code>$location</code>服务连接到虚拟浏览器中,每个input输入框表示一个浏览器的地址栏。</p>
<p>注意，你在第一个浏览器中输入hashbang url的时候（标准URL也一样）,它不会重写/重定向到标准或hashbang形式，
    因为这种转换只会发生在页面加载时解析初始URL的那一步。</p>
<p>在这个例子中，我们使用<code><span class="tag">&lt;base</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/base/index.html"</span><span class="pln"> </span><span class="tag">/&gt;</span></code>

</p><h4>浏览器在HTML5模式</h4>


<div class="tabbable">
<ul class="nav nav-tabs" role="tablist">
<li class="active"><a href="http://www.angularjs.net.cn/tutorial/14.html#html2" role="tab" data-toggle="tab">index.html</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#app2" role="tab" data-toggle="tab">app.js</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#fakebrowser2" role="tab" data-toggle="tab">fakeBrowser.js</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#addressBar2" role="tab" data-toggle="tab">addressBar.js</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#protractor2" role="tab" data-toggle="tab">protractor.js</a></li>
</ul>
<div class="tab-content">
<div class="tab-pane active" id="html2">
<pre class="prettyprint linenums ng-binding"><ol class="linenums"><li class="L0"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">ng-controller</span><span class="pun">=</span><span class="atv">"LocationController"</span><span class="tag">&gt;</span></li><li class="L1"><span class="pln">  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">ng-address-bar</span><span class="tag">&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;</span></li><li class="L2"><span class="pln">  </span><span class="tag">&lt;div&gt;</span></li><li class="L3"><span class="pln">    $location.protocol() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.protocol()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L4"><span class="pln">    $location.host() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.host()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L5"><span class="pln">    $location.port() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.port()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L6"><span class="pln">    $location.path() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.path()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L7"><span class="pln">    $location.search() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.search()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L8"><span class="pln">    $location.hash() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.hash()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L9"><span class="pln">  </span><span class="tag">&lt;/div&gt;</span></li><li class="L0"><span class="pln">  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"navigation"</span><span class="tag">&gt;</span></li><li class="L1"><span class="pln">    </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://www.example.com/base/first?a=b"</span><span class="tag">&gt;</span><span class="pln">/base/first?a=b</span><span class="tag">&lt;/a&gt;</span><span class="pln"> |</span></li><li class="L2"><span class="pln">    </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://www.example.com/base/sec/ond?flag#hash"</span><span class="tag">&gt;</span><span class="pln">sec/ond?flag#hash</span><span class="tag">&lt;/a&gt;</span><span class="pln"> |</span></li><li class="L3"><span class="pln">    </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/other-base/another?search"</span><span class="tag">&gt;</span><span class="pln">external</span><span class="tag">&lt;/a&gt;</span></li><li class="L4"><span class="pln">  </span><span class="tag">&lt;/div&gt;</span></li><li class="L5"><span class="tag">&lt;/div&gt;</span></li></ol></pre>

</div>
    <div class="tab-pane" id="app2">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'html5-mode'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'fake-browser'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'address-bar'</span><span class="pun">])</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="com">// Configure the fakeBrowser. Do not set these values in actual projects.</span></li><li class="L3"><span class="pun">.</span><span class="pln">constant</span><span class="pun">(</span><span class="str">'initUrl'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'http://www.example.com/base/path?a=b#h'</span><span class="pun">)</span></li><li class="L4"><span class="pun">.</span><span class="pln">constant</span><span class="pun">(</span><span class="str">'baseHref'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/base/index.html'</span><span class="pun">)</span></li><li class="L5"><span class="pun">.</span><span class="pln">value</span><span class="pun">(</span><span class="str">'$sniffer'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> history</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">})</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">.</span><span class="pln">controller</span><span class="pun">(</span><span class="str">'LocationController'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$scope</span><span class="pun">,</span><span class="pln"> $location</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">  $scope</span><span class="pun">.</span><span class="pln">$location </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span></li><li class="L9"><span class="pln">  angular</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="str">'protocol host port path search hash'</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">' '</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">method</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">   $scope</span><span class="pun">.</span><span class="pln">$location</span><span class="pun">[</span><span class="pln">method</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">     </span><span class="kwd">var</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> $location</span><span class="pun">[</span><span class="pln">method</span><span class="pun">]();</span></li><li class="L2"><span class="pln">     </span><span class="kwd">return</span><span class="pln"> angular</span><span class="pun">.</span><span class="pln">isObject</span><span class="pun">(</span><span class="pln">result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> angular</span><span class="pun">.</span><span class="pln">toJson</span><span class="pun">(</span><span class="pln">result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L3"><span class="pln">   </span><span class="pun">};</span></li><li class="L4"><span class="pln">  </span><span class="pun">});</span></li><li class="L5"><span class="pun">})</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">.</span><span class="pln">config</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$locationProvider</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">  $locationProvider</span><span class="pun">.</span><span class="pln">html5Mode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">).</span><span class="pln">hashPrefix</span><span class="pun">(</span><span class="str">'!'</span><span class="pun">);</span></li><li class="L9"><span class="pun">})</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pun">.</span><span class="pln">run</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$rootElement</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">  $rootElement</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">stopPropagation</span><span class="pun">();</span><span class="pln"> </span><span class="pun">});</span></li><li class="L3"><span class="pun">});</span></li></ol></pre>
</div>
<div class="tab-pane" id="fakebrowser2">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'fake-browser'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pun">.</span><span class="pln">config</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$provide</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln"> $provide</span><span class="pun">.</span><span class="pln">decorator</span><span class="pun">(</span><span class="str">'$browser'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$delegate</span><span class="pun">,</span><span class="pln"> baseHref</span><span class="pun">,</span><span class="pln"> initUrl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">onUrlChange </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">     </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">urlChange </span><span class="pun">=</span><span class="pln"> fn</span><span class="pun">;</span></li><li class="L7"><span class="pln">   </span><span class="pun">};</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">url </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">     </span><span class="kwd">return</span><span class="pln"> initUrl</span><span class="pun">;</span></li><li class="L1"><span class="pln">  </span><span class="pun">};</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">defer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">,</span><span class="pln"> delay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">     setTimeout</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> fn</span><span class="pun">();</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> delay </span><span class="pun">||</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L5"><span class="pln">   </span><span class="pun">};</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">baseHref </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">     </span><span class="kwd">return</span><span class="pln"> baseHref</span><span class="pun">;</span></li><li class="L9"><span class="pln">   </span><span class="pun">};</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">   </span><span class="kwd">return</span><span class="pln"> $delegate</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span><span class="pun">});</span></li><li class="L3"><span class="pun">});</span></li></ol></pre>
</div>
<div class="tab-pane" id="addressBar2">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'address-bar'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span></li><li class="L1"><span class="pun">.</span><span class="pln">directive</span><span class="pun">(</span><span class="str">'ngAddressBar'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$browser</span><span class="pun">,</span><span class="pln"> $timeout</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">   </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">     </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Address: &lt;input id="addressBar" type="text" style="width: 400px" &gt;'</span><span class="pun">,</span></li><li class="L4"><span class="pln">     link</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">scope</span><span class="pun">,</span><span class="pln"> element</span><span class="pun">,</span><span class="pln"> attrs</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L5"><span class="pln">       </span><span class="kwd">var</span><span class="pln"> input </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">children</span><span class="pun">(</span><span class="str">'input'</span><span class="pun">),</span><span class="pln"> delay</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">       input</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'keypress keyup keydown'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">               delay </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">delay </span><span class="pun">?</span><span class="pln"> $timeout</span><span class="pun">(</span><span class="pln">fireUrlChange</span><span class="pun">,</span><span class="pln"> </span><span class="lit">250</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></li><li class="L9"><span class="pln">               </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">stopPropagation</span><span class="pun">();</span></li><li class="L0"><span class="pln">             </span><span class="pun">})</span></li><li class="L1"><span class="pln">            </span><span class="pun">.</span><span class="pln">val</span><span class="pun">(</span><span class="pln">$browser</span><span class="pun">.</span><span class="pln">url</span><span class="pun">());</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">       $browser</span><span class="pun">.</span><span class="pln">url </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">         </span><span class="kwd">return</span><span class="pln"> url </span><span class="pun">?</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">val</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">val</span><span class="pun">();</span></li><li class="L5"><span class="pln">       </span><span class="pun">};</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">       </span><span class="kwd">function</span><span class="pln"> fireUrlChange</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">         delay </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></li><li class="L9"><span class="pln">         $browser</span><span class="pun">.</span><span class="pln">urlChange</span><span class="pun">(</span><span class="pln">input</span><span class="pun">.</span><span class="pln">val</span><span class="pun">());</span></li><li class="L0"><span class="pln">       </span><span class="pun">}</span></li><li class="L1"><span class="pln">     </span><span class="pun">}</span></li><li class="L2"><span class="pln">   </span><span class="pun">};</span></li><li class="L3"><span class="pln"> </span><span class="pun">});</span></li></ol></pre>
</div>
<div class="tab-pane" id="protractor2">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="kwd">var</span><span class="pln"> addressBar </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">css</span><span class="pun">(</span><span class="str">"#addressBar"</span><span class="pun">)),</span></li><li class="L1"><span class="pln">    url </span><span class="pun">=</span><span class="pln"> </span><span class="str">'http://www.example.com/base/path?a=b#h'</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">it</span><span class="pun">(</span><span class="str">"should show fake browser info on load"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L5"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">addressBar</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'value'</span><span class="pun">)).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">url</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.protocol()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'http'</span><span class="pun">);</span></li><li class="L8"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.host()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'www.example.com'</span><span class="pun">);</span></li><li class="L9"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.port()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'80'</span><span class="pun">);</span></li><li class="L0"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.path()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/path'</span><span class="pun">);</span></li><li class="L1"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.search()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'{"a":"b"}'</span><span class="pun">);</span></li><li class="L2"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.hash()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'h'</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pun">});</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">it</span><span class="pun">(</span><span class="str">"should change $location accordingly"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L7"><span class="pln">  </span><span class="kwd">var</span><span class="pln"> navigation </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">all</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">css</span><span class="pun">(</span><span class="str">"#navigation a"</span><span class="pun">));</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">  navigation</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">0</span><span class="pun">).</span><span class="pln">click</span><span class="pun">();</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">addressBar</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'value'</span><span class="pun">)).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">"http://www.example.com/base/first?a=b"</span><span class="pun">);</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.protocol()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'http'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.host()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'www.example.com'</span><span class="pun">);</span></li><li class="L5"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.port()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'80'</span><span class="pun">);</span></li><li class="L6"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.path()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/first'</span><span class="pun">);</span></li><li class="L7"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.search()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'{"a":"b"}'</span><span class="pun">);</span></li><li class="L8"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.hash()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">''</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">  navigation</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">).</span><span class="pln">click</span><span class="pun">();</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">addressBar</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'value'</span><span class="pun">)).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">"http://www.example.com/base/sec/ond?flag#hash"</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.protocol()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'http'</span><span class="pun">);</span></li><li class="L6"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.host()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'www.example.com'</span><span class="pun">);</span></li><li class="L7"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.port()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'80'</span><span class="pun">);</span></li><li class="L8"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.path()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/sec/ond'</span><span class="pun">);</span></li><li class="L9"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.search()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'{"flag":true}'</span><span class="pun">);</span></li><li class="L0"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.hash()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'hash'</span><span class="pun">);</span></li><li class="L1"><span class="pun">});</span></li></ol></pre>
</div>
</div></div>
<div class="well">
	<iframe src="./19.AngularJS $location_files/index.html"></iframe>
</div>
<h4>在HTML5浏览器的回退模式（Hashbang模式）</h4>

<ul class="nav nav-tabs" role="tablist">
<li class="active"><a href="http://www.angularjs.net.cn/tutorial/14.html#html3" role="tab" data-toggle="tab">index.html</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#app3" role="tab" data-toggle="tab">app.js</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#fakebrowser3" role="tab" data-toggle="tab">fakeBrowser.js</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#addressBar3" role="tab" data-toggle="tab">addressBar.js</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#protractor3" role="tab" data-toggle="tab">protractor.js</a></li>
</ul>
<div class="tab-content">
<div class="tab-pane active" id="html3">
<pre class="prettyprint linenums ng-binding"><ol class="linenums"><li class="L0"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">ng-controller</span><span class="pun">=</span><span class="atv">"LocationController"</span><span class="tag">&gt;</span></li><li class="L1"><span class="pln">  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">ng-address-bar</span><span class="tag">&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;</span></li><li class="L2"><span class="pln">  </span><span class="tag">&lt;div&gt;</span></li><li class="L3"><span class="pln">    $location.protocol() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.protocol()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L4"><span class="pln">    $location.host() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.host()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L5"><span class="pln">    $location.port() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.port()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L6"><span class="pln">    $location.path() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.path()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L7"><span class="pln">    $location.search() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.search()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L8"><span class="pln">    $location.hash() = </span><span class="tag">&lt;span</span><span class="pln"> </span><span class="atn">ng-bind</span><span class="pun">=</span><span class="atv">"$location.hash()"</span><span class="tag">&gt;&lt;/span&gt;</span><span class="pln"> </span><span class="tag">&lt;br&gt;</span></li><li class="L9"><span class="pln">  </span><span class="tag">&lt;/div&gt;</span></li><li class="L0"><span class="pln">  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"navigation"</span><span class="tag">&gt;</span></li><li class="L1"><span class="pln">    </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://www.example.com/base/first?a=b"</span><span class="tag">&gt;</span><span class="pln">/base/first?a=b</span><span class="tag">&lt;/a&gt;</span><span class="pln"> |</span></li><li class="L2"><span class="pln">    </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"http://www.example.com/base/sec/ond?flag#hash"</span><span class="tag">&gt;</span><span class="pln">sec/ond?flag#hash</span><span class="tag">&lt;/a&gt;</span><span class="pln"> |</span></li><li class="L3"><span class="pln">    </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/other-base/another?search"</span><span class="tag">&gt;</span><span class="pln">external</span><span class="tag">&lt;/a&gt;</span></li><li class="L4"><span class="pln">  </span><span class="tag">&lt;/div&gt;</span></li><li class="L5"><span class="tag">&lt;/div&gt;</span></li></ol></pre>

</div>
    <div class="tab-pane" id="app3">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'hashbang-mode'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'fake-browser'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'address-bar'</span><span class="pun">])</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="com">// Configure the fakeBrowser. Do not set these values in actual projects.</span></li><li class="L3"><span class="pun">.</span><span class="pln">constant</span><span class="pun">(</span><span class="str">'initUrl'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'http://www.example.com/base/index.html#!/path?a=b#h'</span><span class="pun">)</span></li><li class="L4"><span class="pun">.</span><span class="pln">constant</span><span class="pun">(</span><span class="str">'baseHref'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'/base/index.html'</span><span class="pun">)</span></li><li class="L5"><span class="pun">.</span><span class="pln">value</span><span class="pun">(</span><span class="str">'$sniffer'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> history</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">})</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">.</span><span class="pln">config</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$locationProvider</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">  $locationProvider</span><span class="pun">.</span><span class="pln">html5Mode</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">).</span><span class="pln">hashPrefix</span><span class="pun">(</span><span class="str">'!'</span><span class="pun">);</span></li><li class="L9"><span class="pun">})</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pun">.</span><span class="pln">controller</span><span class="pun">(</span><span class="str">'LocationController'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$scope</span><span class="pun">,</span><span class="pln"> $location</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">  $scope</span><span class="pun">.</span><span class="pln">$location </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{};</span></li><li class="L3"><span class="pln">  angular</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="str">'protocol host port path search hash'</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">' '</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">method</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">    $scope</span><span class="pun">.</span><span class="pln">$location</span><span class="pun">[</span><span class="pln">method</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L5"><span class="pln">      </span><span class="kwd">var</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> $location</span><span class="pun">[</span><span class="pln">method</span><span class="pun">]();</span></li><li class="L6"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> angular</span><span class="pun">.</span><span class="pln">isObject</span><span class="pun">(</span><span class="pln">result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> angular</span><span class="pun">.</span><span class="pln">toJson</span><span class="pun">(</span><span class="pln">result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L7"><span class="pln">    </span><span class="pun">};</span></li><li class="L8"><span class="pln">  </span><span class="pun">});</span></li><li class="L9"><span class="pun">})</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pun">.</span><span class="pln">run</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$rootElement</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">  $rootElement</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'click'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">    e</span><span class="pun">.</span><span class="pln">stopPropagation</span><span class="pun">();</span></li><li class="L4"><span class="pln">  </span><span class="pun">});</span></li><li class="L5"><span class="pun">});</span></li></ol></pre>
</div>
<div class="tab-pane" id="fakebrowser3">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'fake-browser'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pun">.</span><span class="pln">config</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$provide</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln"> $provide</span><span class="pun">.</span><span class="pln">decorator</span><span class="pun">(</span><span class="str">'$browser'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$delegate</span><span class="pun">,</span><span class="pln"> baseHref</span><span class="pun">,</span><span class="pln"> initUrl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">onUrlChange </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">     </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">urlChange </span><span class="pun">=</span><span class="pln"> fn</span><span class="pun">;</span></li><li class="L7"><span class="pln">   </span><span class="pun">};</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">url </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">     </span><span class="kwd">return</span><span class="pln"> initUrl</span><span class="pun">;</span></li><li class="L1"><span class="pln">  </span><span class="pun">};</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">defer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">,</span><span class="pln"> delay</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">     setTimeout</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> fn</span><span class="pun">();</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> delay </span><span class="pun">||</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L5"><span class="pln">   </span><span class="pun">};</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">  $delegate</span><span class="pun">.</span><span class="pln">baseHref </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">     </span><span class="kwd">return</span><span class="pln"> baseHref</span><span class="pun">;</span></li><li class="L9"><span class="pln">   </span><span class="pun">};</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">   </span><span class="kwd">return</span><span class="pln"> $delegate</span><span class="pun">;</span></li><li class="L2"><span class="pln"> </span><span class="pun">});</span></li><li class="L3"><span class="pun">});</span></li></ol></pre>
</div>
<div class="tab-pane" id="addressBar3">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'address-bar'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span></li><li class="L1"><span class="pun">.</span><span class="pln">directive</span><span class="pun">(</span><span class="str">'ngAddressBar'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$browser</span><span class="pun">,</span><span class="pln"> $timeout</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">   </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">     </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Address: &lt;input id="addressBar" type="text" style="width: 400px" &gt;'</span><span class="pun">,</span></li><li class="L4"><span class="pln">     link</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">scope</span><span class="pun">,</span><span class="pln"> element</span><span class="pun">,</span><span class="pln"> attrs</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L5"><span class="pln">       </span><span class="kwd">var</span><span class="pln"> input </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">children</span><span class="pun">(</span><span class="str">'input'</span><span class="pun">),</span><span class="pln"> delay</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">       input</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'keypress keyup keydown'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">               delay </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">delay </span><span class="pun">?</span><span class="pln"> $timeout</span><span class="pun">(</span><span class="pln">fireUrlChange</span><span class="pun">,</span><span class="pln"> </span><span class="lit">250</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></li><li class="L9"><span class="pln">               </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">stopPropagation</span><span class="pun">();</span></li><li class="L0"><span class="pln">             </span><span class="pun">})</span></li><li class="L1"><span class="pln">            </span><span class="pun">.</span><span class="pln">val</span><span class="pun">(</span><span class="pln">$browser</span><span class="pun">.</span><span class="pln">url</span><span class="pun">());</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">       $browser</span><span class="pun">.</span><span class="pln">url </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">         </span><span class="kwd">return</span><span class="pln"> url </span><span class="pun">?</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">val</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> input</span><span class="pun">.</span><span class="pln">val</span><span class="pun">();</span></li><li class="L5"><span class="pln">       </span><span class="pun">};</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">       </span><span class="kwd">function</span><span class="pln"> fireUrlChange</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">         delay </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></li><li class="L9"><span class="pln">         $browser</span><span class="pun">.</span><span class="pln">urlChange</span><span class="pun">(</span><span class="pln">input</span><span class="pun">.</span><span class="pln">val</span><span class="pun">());</span></li><li class="L0"><span class="pln">       </span><span class="pun">}</span></li><li class="L1"><span class="pln">     </span><span class="pun">}</span></li><li class="L2"><span class="pln">   </span><span class="pun">};</span></li><li class="L3"><span class="pln"> </span><span class="pun">});</span></li></ol></pre>
</div>
<div class="tab-pane" id="protractor3">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="kwd">var</span><span class="pln"> addressBar </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">css</span><span class="pun">(</span><span class="str">"#addressBar"</span><span class="pun">)),</span></li><li class="L1"><span class="pln">     url </span><span class="pun">=</span><span class="pln"> </span><span class="str">'http://www.example.com/base/index.html#!/path?a=b#h'</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">it</span><span class="pun">(</span><span class="str">"should show fake browser info on load"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">addressBar</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'value'</span><span class="pun">)).</span><span class="pln">toBe</span><span class="pun">(</span><span class="pln">url</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.protocol()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'http'</span><span class="pun">);</span></li><li class="L7"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.host()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'www.example.com'</span><span class="pun">);</span></li><li class="L8"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.port()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'80'</span><span class="pun">);</span></li><li class="L9"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.path()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/path'</span><span class="pun">);</span></li><li class="L0"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.search()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'{"a":"b"}'</span><span class="pun">);</span></li><li class="L1"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.hash()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'h'</span><span class="pun">);</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pun">});</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">it</span><span class="pun">(</span><span class="str">"should change $location accordingly"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">  </span><span class="kwd">var</span><span class="pln"> navigation </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">.</span><span class="pln">all</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">css</span><span class="pun">(</span><span class="str">"#navigation a"</span><span class="pun">));</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">  navigation</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">0</span><span class="pun">).</span><span class="pln">click</span><span class="pun">();</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">addressBar</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'value'</span><span class="pun">)).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">"http://www.example.com/base/index.html#!/first?a=b"</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.protocol()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'http'</span><span class="pun">);</span></li><li class="L3"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.host()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'www.example.com'</span><span class="pun">);</span></li><li class="L4"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.port()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'80'</span><span class="pun">);</span></li><li class="L5"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.path()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/first'</span><span class="pun">);</span></li><li class="L6"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.search()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'{"a":"b"}'</span><span class="pun">);</span></li><li class="L7"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.hash()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">''</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">  navigation</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="lit">1</span><span class="pun">).</span><span class="pln">click</span><span class="pun">();</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">addressBar</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="str">'value'</span><span class="pun">)).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">"http://www.example.com/base/index.html#!/sec/ond?flag#hash"</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.protocol()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'http'</span><span class="pun">);</span></li><li class="L5"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.host()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'www.example.com'</span><span class="pun">);</span></li><li class="L6"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.port()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'80'</span><span class="pun">);</span></li><li class="L7"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.path()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'/sec/ond'</span><span class="pun">);</span></li><li class="L8"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.search()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'{"flag":true}'</span><span class="pun">);</span></li><li class="L9"><span class="pln">  expect</span><span class="pun">(</span><span class="pln">element</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">(</span><span class="str">'$location.hash()'</span><span class="pun">)).</span><span class="pln">getText</span><span class="pun">()).</span><span class="pln">toBe</span><span class="pun">(</span><span class="str">'hash'</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pun">});</span></li></ol></pre>
</div>
</div>
<div class="well">
	<iframe src="./19.AngularJS $location_files/index(1).html"></iframe>
</div>
<hr><h2 id="附加说明">附加说明</h2>
<h3 id="附加说明_页面重载与导航">页面重载与导航</h3>
<p><code>$location</code>服务只允许你修改URL，却不会帮你重新加载页面。如果你需要修改地址并重新加载页面，或者需要导航到其他页面，
    请使用底层API：<a href="http://www.angularjs.net.cn/tutorial/api/ng.$window"><code>$window<span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">href</span></code></a>。</p>
<h3 id="附加说明_在作用域生命周期之外使用$location">在作用域(scope)生命周期之外使用$location</h3>
<p><code>$location</code>知道Angular的<a href="http://www.angularjs.net.cn/tutorial/api/ng.$rootScope.Scope"><code><span class="pun">作用域(</span><span class="pln">scope</span><span class="pun">)</span></code></a>的生命周期。当浏览器中的地址变化时，
    它会更新<code>$location</code>对象，并且调用<code>$apply</code>，以便所有的$watchers和$observers都能得到通知。</p>
<p>当你在<code>$digest</code>阶段中修改<code>$location</code>的时候，一切如常：<code>$location</code>会把这些修改反映给浏览器，
    并且通知所有$watchers / $observers。
    如果你想在Angular之外（比如，通过DOM事件或者在测试容器中）修改<code>$location</code>，你必须调用<code>$apply</code>来告知这项改动。</p>
<h3 id="附加说明_$locationpath与或/前缀">$location.path()与!或/前缀</h3>
<p>Path永远会以正斜杠（<code><span class="pun">/</span></code>）开头，<code>$location<span class="pun">.</span><span class="pln">path</span><span class="pun">()</span></code>作为setter方法调用时，如果没有用正斜杠开头，它会给加上一个。</p>
<p>注意，在hashbang模式中，<code><span class="pun">!</span></code>前缀并不是<code>$location<span class="pun">.</span><span class="pln">path</span><span class="pun">()</span></code>的一部分；它只是hash“前缀”。</p>
<hr><h2 id="带有$location服务的测试">带有$location服务的测试</h2>
<p>如果在测试期间使用<code>$location</code>服务，你将处于Angular的<a href="http://www.angularjs.net.cn/tutorial/api/ng.$rootScope.Scope"><code><span class="pun">作用域(</span><span class="pln">scope</span><span class="pun">)</span></code></a>之外。这就意味着你有责任调用<code>scope<span class="pun">.</span><span class="pln">$apply</span><span class="pun">()</span></code>方法。</p>
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pln">describe</span><span class="pun">(</span><span class="str">'serviceUnderTest'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">  beforeEach</span><span class="pun">(</span><span class="kwd">module</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$provide</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">    $provide</span><span class="pun">.</span><span class="pln">factory</span><span class="pun">(</span><span class="str">'serviceUnderTest'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$location</span><span class="pun">){</span></li><li class="L3"><span class="pln">      </span><span class="com">// 随便做点什么...</span></li><li class="L4"><span class="pln">    </span><span class="pun">});</span></li><li class="L5"><span class="pln">  </span><span class="pun">});</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">  it</span><span class="pun">(</span><span class="str">'should...'</span><span class="pun">,</span><span class="pln"> inject</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$location</span><span class="pun">,</span><span class="pln"> $rootScope</span><span class="pun">,</span><span class="pln"> serviceUnderTest</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">    $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="str">'/new/path'</span><span class="pun">);</span></li><li class="L9"><span class="pln">    $rootScope</span><span class="pun">.</span><span class="pln">$apply</span><span class="pun">();</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    </span><span class="com">// 验证这个服务应该做的事...</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  </span><span class="pun">}));</span></li><li class="L4"><span class="pun">});</span></li></ol></pre>
<hr><h2 id="从angularjs的早期版本中迁移过来">从AngularJS的早期版本中迁移过来</h2>
<p>在Angular的早期版本中，<code>$location</code>使用<code>hashPath</code>或<code>hashSearch</code>来处理path和search方法。
    而这个版本中，<code>$location</code>使用<code>path</code>和<code>search</code>方法，然后，在需要时，它会根据自己获得的信息来组合出
    hashbang URL（比如<code>http<span class="pun">:</span><span class="com">//server.com/#!/path?search=a</span></code>）</p>
<h3>你代码中的改动</h3>
<table class="table table-bordered table-striped">

    <tbody><tr>
        <th>在应用程序范围内导航</th>
        <th>改为</th>
    </tr>


    <tr>
        <td>$location.href = value<br>$location.hash = value<br>$location.update(value)<br>$location.updateHash(value)</td>
        <td>$location.path(path).search(search)</td>
    </tr>

    <tr>
        <td>$location.hashPath = path</td>
        <td>$location.path(path)</td>
    </tr>

    <tr>
        <td>$location.hashSearch = search</td>
        <td>$location.search(search)</td>
    </tr>

    <tr class="head">
        <td>导航到应用程序外部</td>
        <td>使用底层API</td>
    </tr>

    <tr>
        <td>$location.href = value<br>$location.update(value)</td>
        <td>$window.location.href = value</td>
    </tr>

    <tr>
        <td>$location[protocol | host | port | path | search]</td>
        <td>$window.location[protocol | host | port | path | search]</td>
    </tr>

    <tr class="head">
        <td>读取</td>
        <td>改为</td>
    </tr>

    <tr>
        <td>$location.hashPath</td>
        <td>$location.path()</td>
    </tr>

    <tr>
        <td>$location.hashSearch</td>
        <td>$location.search()</td>
    </tr>

    <tr>
        <td>$location.href<br>$location.protocol<br>$location.host<br>$location.port<br>$location.hash</td>
        <td>$location.absUrl()<br>$location.protocol()<br>$location.host()<br>$location.port()<br>$location.path() + $location.search()</td>
    </tr>

    <tr>
        <td>$location.path<br>$location.search</td>
        <td>$window.location.path<br>$window.location.search</td>
    </tr>

</tbody></table> 
<hr>
<h3>$location的双向绑定</h3>
<p>因为 <code>$location</code> 使用<code>getters/setters</code>, 你可以使用<code> ng-model-options="{ getterSetter: true }"</code>来将它绑定到 <code>ngModel</code></p>
<h3>源码</h3>

<div class="tabbable">
<ul class="nav nav-tabs" role="tablist">
<li class="active"><a href="http://www.angularjs.net.cn/tutorial/14.html#html1" role="tab" data-toggle="tab">index.html</a></li>
<li><a href="http://www.angularjs.net.cn/tutorial/14.html#js1" role="tab" data-toggle="tab">script.js</a></li>
</ul>
<div class="tab-content">
<div class="tab-pane active" id="html1">
<pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">ng-controller</span><span class="pun">=</span><span class="atv">"LocationController"</span><span class="tag">&gt;</span></li><li class="L1"><span class="pln">  </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text"</span><span class="pln"> </span><span class="atn">ng-model</span><span class="pun">=</span><span class="atv">"locationPath"</span><span class="pln"> </span><span class="atn">ng-model-options</span><span class="pun">=</span><span class="atv">"{ getterSetter: true }"</span><span class="pln"> </span><span class="tag">/&gt;</span></li><li class="L2"><span class="tag">&lt;/div&gt;</span><span class="pln">	</span></li></ol></pre>
   
</div>
    <div class="tab-pane" id="js1">
<pre class="prettyprint linenums" ng-set-text="script.js-224"><ol class="linenums"><li class="L0"><span class="pln">angular</span><span class="pun">.</span><span class="kwd">module</span><span class="pun">(</span><span class="str">'locationExample'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span></li><li class="L1"><span class="pun">.</span><span class="pln">controller</span><span class="pun">(</span><span class="str">'LocationController'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="str">'$scope'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'$location'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">$scope</span><span class="pun">,</span><span class="pln"> $location</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">  $scope</span><span class="pun">.</span><span class="pln">locationPath </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">newLocation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> $location</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="pln">newLocation</span><span class="pun">);</span></li><li class="L4"><span class="pln">  </span><span class="pun">};</span></li><li class="L5"><span class="pun">}]);</span></li></ol></pre>
        
    </div>
</div></div>

<h3>效果</h3>
<div class="well ">
    <iframe src="./19.AngularJS $location_files/index(2).html"></iframe>
</div>

<hr>
<h2 id="相关api">相关API</h2>
<ul>
    <li><a href="http://www.angularjs.net.cn/api/113.html"><code>$location API</code></a></li>
</ul>

		
	
		
	<div class="ad1">	
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 336 x 280 -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-6117966252207595" data-ad-slot="9942648348"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>	
	
		</div>
	</div>
</div>
<footer>
	<p>Copyright © 2014 - 2018 <a href="http://www.angularjs.net.cn/">AngularJS中文网</a>, <a href="http://www.miitbeian.gov.cn/" target="_blank">粤ICP备15074038号-4</a>, All Rights Reserved.

</p>
</footer>
<script type="text/javascript">
    /*图+推广*/
    /*建议投放在200*300以上的图片*/
    var cpro_id = "u1948815";
</script>
<script type="text/javascript" src="./19.AngularJS $location_files/i.js.下载"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?12ec03a62d55d8fb4b144b14ccedecec";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<script src="./19.AngularJS $location_files/jquery.js.下载"></script>
<script src="./19.AngularJS $location_files/common.js.下载"></script>
<script src="./19.AngularJS $location_files/bootstrap.min.js.下载"></script>

<div style="position: absolute; border: 0px; margin: 0px; padding: 0px; height: 0px; overflow: visible; text-align: left; top: 2888px; left: 674px; width: 567px; display: block;"><div id="f21ac82b21eeb7322631b6aa94e17f4571az7p"><style type="text/css" media="screen">#f21ac82b21eeb7322631b6aa94e17f4571az7p {position:absolute;top:0;left:0;right:auto;bottom:auto;margin:0;padding:0;border:0;width:200px;background:transparent;-webkit-box-sizing:content-box;box-sizing:content-box;}#f21ac82b21eeb7322631b6aa94e17f4571az7p div{float:left;width:144px;height:17px;line-height:17px;margin:3px 0 0 -2px;background:url(//ecma.bdimg.com/public03/imageplus/tip-back.png) 0 0 no-repeat;_background:0;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='corp',src='//ecma.bdimg.com/public03/imageplus/tip-back.png');font-family:sans-serif;text-align:center;font-size:12px;color:#666;padding:8px 10px;display:none;-webkit-box-sizing:content-box;box-sizing:content-box;}#f21ac82b21eeb7322631b6aa94e17f4571az7p-icon {float:left;height:38px;width:38px;cursor:default;background:url(//ecma.bdimg.com/public03/imageplus/tip.png) 0 0 no-repeat;_background:0;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='corp',src='//ecma.bdimg.com/public03/imageplus/tip.png');-webkit-box-sizing:content-box;box-sizing:content-box;}#f21ac82b21eeb7322631b6aa94e17f4571az7p-icon:hover {float:left;height:38px;width:38px;}#f21ac82b21eeb7322631b6aa94e17f4571az7p #f21ac82b21eeb7322631b6aa94e17f4571az7p-icon:hover {background:url(//ecma.bdimg.com/public03/imageplus/tip-hover.png) 0 0 no-repeat;_background:0;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='corp',src='//ecma.bdimg.com/public03/imageplus/tip-hover.png');}</style><a href="javascript:void(0);" id="f21ac82b21eeb7322631b6aa94e17f4571az7p-icon"></a><div id="f21ac82b21eeb7322631b6aa94e17f4571az7p-msg">查看标识获取更多信息</div></div><style type="text/css" media="screen" id="s-f21ac82b21eeb7322631b6aa94e17f451dgx8gy">.ad-widget-imageplus-sticker{font:12px/1.5 arial,sans-serif;position:absolute;left:0;width:100%;display:none;overflow:hidden;color:#FFF;background:transparent;-webkit-transition:height .5s,top .5s;transition:height .5s,top .5s}.ad-widget-imageplus-sticker div{background:transparent}.ad-widget-imageplus-sticker-cut{display:block}.ad-widget-imageplus-sticker-bg{position:absolute;z-index:1;left:0;top:0;width:100%;height:100%;background:#000!important;box-shadow:2px 2px 4px #000}.ad-widget-imageplus-sticker-bd{position:relative;z-index:2;left:0;top:0;width:100%;overflow:hidden}.ad-widget-imageplus-sticker-close{position:absolute;z-index:3;right:0;top:5px;width:25px;height:25px;line-height:25px;text-decoration:none;text-align:center;font-size:18px;color:#FFF!important}.ad-widget-imageplus-sticker-close:hover{background-color:#000}
.ad-widget-imageplus-sticker-theme-white{color:#333}.ad-widget-imageplus-sticker-theme-white .ad-widget-imageplus-sticker-bg{background:#FFF!important;box-shadow:2px 2px 4px #FFF}.ad-widget-imageplus-sticker-theme-white .ad-widget-imageplus-sticker-close{color:#666!important}.ad-widget-imageplus-sticker-theme-white .ad-widget-imageplus-sticker-close:hover{background-color:#FFF!important}.ad-widget-imageplus-sticker-theme-none{color:#333}.ad-widget-imageplus-sticker-theme-none .ad-widget-imageplus-sticker-bg{background:transparent!important;box-shadow:none}.ad-widget-imageplus-sticker-theme-none .ad-widget-imageplus-sticker-close{color:#666!important}.ad-widget-imageplus-sticker-theme-none .ad-widget-imageplus-sticker-close:hover{background-color:#FFF!important}.ad-widget-imageplus-sticker-theme-none-white{color:#333}
.ad-widget-imageplus-sticker-theme-none-white .ad-widget-imageplus-sticker-bg{background:transparent!important;box-shadow:none}.ad-widget-imageplus-sticker-theme-none-white-2 .ad-widget-imageplus-sticker-bg{background:transparent!important;box-shadow:none}.ad-widget-imageplus-sticker-theme-none-white-2 .ad-widget-imageplus-sticker-close{top:0;text-indent:-9999px;background:url(//ecma.bdimg.com/public03/imageplus/v2/dock/close.png) no-repeat 0 0 transparent}.ad-widget-imageplus-sticker-theme-v2 .ad-big-title{position:relative;top:0;opacity:1;filter:alpha(opacity=100);-webkit-transition:top .5s,opacity .6s;transition:top .5s,opacity .6s}.ad-widget-imageplus-sticker-theme-v2 .ad-widget-imageplus-sticker-showing .ad-big-title{position:relative;top:-36px;opacity:0;filter:alpha(opacity=0)}.ad-widget-imageplus-sticker-theme-v2 .ad-widget-imageplus-sticker-showing .ad-widget-imageplus-sticker-bg{top:26px}
.ad-widget-imageplus-sticker-theme-v2 .ad-widget-imageplus-sticker-close{top:0;text-indent:-9999px;background:url(//ecma.bdimg.com/public03/imageplus/v2/dock/close.png) no-repeat 0 0 transparent}.ad-widget-imageplus-sticker-thumbnail{font:12px/1.5 arial,sans-serif;position:absolute;right:0;top:0;height:20px;width:100px;overflow:hidden;background:transparent;-webkit-transition:height .5s;-moz-transition:height .5s;-ms-transition:height .5s;-o-transition:height .5s;transition:height .5s;background-color:rgba(0,0,0,0.5);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#80000000,endColorstr=#80000000);-ms-filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#80000000,endColorstr=#80000000)}.ad-widget-imageplus-sticker-thumbnail a{float:right;width:100px;height:20px;line-height:20px;text-align:center;color:white;background:transparent;text-decoration:none}
.ad-widget-imageplus-sticker-thumbnail i{width:12px;height:8px;margin-top:6px;margin-left:5px;display:block;float:left;background:url('//ecma.bdimg.com/adtest/8e547549c94ab88c81b644d5ff63b0d3.png') no-repeat 0 0;background:none \9;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='corp',src='//ecma.bdimg.com/adtest/8e547549c94ab88c81b644d5ff63b0d3.png')\9}.ad-widget-imageplus-sticker-close-newstyle{top:0;text-indent:-9999px;background:url(//ecmb.bdimg.com/public03/v2/dock/iconfont-close.png) no-repeat 0 0 transparent!important}.baiduimageplus-s-pa{position:relative;width:100%;height:101px;overflow:hidden;cursor:default;-webkit-transition:top .5s;-moz-transition:top .5s;-ms-transition:top .5s;-o-transition:top .5s;transition:top .5s}.baiduimageplus-s-pa a{outline:0;text-decoration:none}
.baiduimageplus-s-pa a:hover{text-decoration:underline}.baiduimageplus-s-pa .baiduimageplus-s-pa-bg{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.baiduimageplus-s-pa .baiduimageplus-s-pa-ct{position:relative;z-index:2}.baiduimageplus-s-pa .baiduimageplus-s-pa-hd{height:26px;line-height:26px;text-indent:10px}.baiduimageplus-s-pa .baiduimageplus-s-pa-hd a{font-size:14px;color:#FFF}.baiduimageplus-s-pa .baiduimageplus-s-pa-bd{position:relative;margin:10px 0;overflow:hidden;_zoom:1}.baiduimageplus-s-pa .baiduimageplus-s-pa-img{float:left;_display:inline;width:50px;height:50px;margin:5px 12px 0 10px}.baiduimageplus-s-pa .baiduimageplus-s-pa-img img{display:block;width:50px;height:50px;border:0}.baiduimageplus-s-pa .baiduimageplus-s-pa-img-bigoutter{float:left;_display:inline;width:70px;height:70px;_width:65px;_height:65px;margin:-20px 12px 0 10px;_margin:5px 5px 0 5px;_postion:relative}
.baiduimageplus-s-pa .baiduimageplus-s-pa-img-bigoutter img{width:70px;height:70px;_position:absolute;_top:-20px;_left:5px}.baiduimageplus-s-pa .baiduimageplus-s-pa-txt{margin-right:85px;height:54px;overflow:hidden;zoom:1;line-height:1.5;word-wrap:break-word;font-size:12px;text-align:left;text-decoration:none;-webkit-line-clamp:2}.baiduimageplus-s-pa .baiduimageplus-s-pa-txt a{color:#FFF}.baiduimageplus-s-pa .baiduimageplus-s-pa-txt a:hover{text-decoration:underline}.baiduimageplus-s-pa .baiduimageplus-s-pa-title,.baiduimageplus-s-pa .baiduimageplus-s-pa-desc,.baiduimageplus-s-pa .baiduimageplus-s-pa-links{float:none;padding:0;border:0;position:static;display:block;visibility:visible;text-align:left;background:transparent;-webkit-box-sizing:content-box;box-sizing:content-box;margin:0;height:18px;line-height:18px;zoom:1;color:#FFF;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.baiduimageplus-s-pa .baiduimageplus-s-pa-links a{float:left;_display:inline;padding:0 7px;color:#FFF;border-left:1px solid #999;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.baiduimageplus-s-pa .baiduimageplus-s-pa-links a:last-child{margin-right:0}.baiduimageplus-s-pa .baiduimageplus-s-pa-links a:first-child{border-left:none;padding-left:0}.baiduimageplus-s-pa .baiduimageplus-s-pa-links a:hover{text-decoration:underline}.baiduimageplus-s-pa .baiduimageplus-s-pa-title,.baiduimageplus-s-pa .baiduimageplus-s-pa-title a{color:#CCC}.baiduimageplus-s-pa .baiduimageplus-s-pa-bt{position:absolute;top:20px;right:10px;margin:0;width:70px;height:25px;display:block;text-decoration:none;color:#FFF;font-size:14px;text-align:center;line-height:25px;background:#bc0000;box-shadow:2px 2px 4px #000;border-radius:5px}
.baiduimageplus-s-pa .baiduimageplus-s-pa-bt:hover{-webkit-animation:none;animation:none;text-decoration:none;background-color:#ea2b2b}.baiduimageplus-s-pa .baiduimageplus-s-pa-adslogo{position:absolute;bottom:0;right:31.2px;z-index:3;height:16.8px;width:16.8px;background:url(//ecma.bdimg.com/public03/imageplus/logo/pc_ads_logo_20161223.png) no-repeat;background-size:100% 100%;display:none}.baiduimageplus-s-pa .baiduimageplus-s-pa-adstext{position:absolute;right:0;bottom:0;width:31.2px;height:16.8px;overflow:hidden;z-index:12;background:url(//ecma.bdimg.com/public03/imageplus/logo/pc_ads_20161223.png) no-repeat;background-size:100% 100%}.ad-widget-imageplus-sticker-showing .baiduimageplus-s-pa-hd{opacity:0;filter:alpha(opacity=0)}.baiduimageplus-s-pa-links a{background:url(http://ecma.bdimg.com/adtest/5d5a28881dc5b110114e55cf6d4f69ec.png) no-repeat left top;background-position:0 0;_filter:progid:dximagetransform.microsoft.alphaimageloader(enabled=true,src=" http://ecma.bdimg.com/adtest/5d5a28881dc5b110114e55cf6d4f69ec.png",sizingMethod="crop");_background:none;display:inline-block;margin-right:3px!important;padding-left:13px!important;padding-right:7px;border:0!important}
.baiduimageplus-s-pa-links a:hover{text-decoration:underline}</style><div id="f21ac82b21eeb7322631b6aa94e17f451dgx8gy" data-rendered="true" style="margin: 0px; padding: 0px; border: none; overflow: visible; text-align: left;"><div class="ad-widget-imageplus-sticker ad-widget-imageplus-sticker-theme-v2 ad-widget-imageplus-sticker-cut" id="w-ruq6m6" style="display: block; top: 211px; height: 100px;">
<div class="ad-widget-imageplus-sticker ad-widget-imageplus-sticker-wrapper ad-widget-imageplus-sticker-box-showing" id="w-ruq6m6-wrapper" style="display: block; top: 74px; height: 26px;">
<div class="ad-widget-imageplus-sticker-bg" id="w-ruq6m6-background" style="opacity: 0.75;"></div>
<div class="ad-widget-imageplus-sticker-bd" id="w-ruq6m6-body">
<div class="baiduimageplus-s-pa" id="w-qbja06">
<div class="baiduimageplus-s-pa-bg" id="w-qbja06-background"></div>
<div class="baiduimageplus-s-pa-ct">
<div class="baiduimageplus-s-pa-hd">
<a data-log="2" data-mid="" href="http://m.baidu.com/mobads.php?Kf0000a4OWr9Ai5tH5Q7olcDb1qFpaRXzuEb-R1Y-9cFX5Q4kdNwXm0UtJYxjlQ4YeFNbJhBo2R6eGjx7cqK-l4rwhf_KOxcMFulFm-9q_KmPFTe9xF0HjKNl0x3kI_kTHSRXdSuCU7AbiOyRTFhlH_A6yIFYkjBTQztM3d2r1IYtoVCJf.7R_a6ePCHCsnkRZubQDk3eonMWgYvT_rrumuCyn-h1_LJ0.pywW5y4Jnjc0mLKGujY0uh-zTLwxIZF9uARqn0K1uyPEUhwxIZF9uARqn0KsThqvpy4WuHYs0APGIZbqn0KWpAdb5HD0TvPCUyfqnfK1TjYk0ZI_5H00mv99Uh4-UjYs0ZN1ugFxIZ-suHYk0AN3mv99UhI-gLw4TARqn0KVmgwWp7qWUvw-5H00mywWUA71T1Ys0Zwd5gRkrHf3rjDd0ZwV5HcLnjm3PHf4P6KYujYs0Zw9TWYs0ZP1TjYd0Au85HTdnjcLnHmsgvPsT6KYIZ0qnfK8IZws5HD0mMcqnHc0uANvpyP-gv-b5HD0uZws5HD0IgF_5y9YIZ0lQzqLILT8my4MIyk9ThG1Qh4-Ia4WUBqYIgwETh-9UatkPa4CIAd_0APC5H00uh4z5H00Tv3qfWfdnWKDwb7anbu7PRDswRckwWPjPjndnDmzwWD1f1f0mgwEUNqGujYs0Ad-uA-9gLw4TARqn6K8UL0q0A7sgv-b5fKbuguxIZ0q0ZPbp1Y0TvwogLmq0AwWgLF-TNqspvTq0AwWgvPdpyfq0A7WmLfq0A7sTA-b5y78uLN_mgFJTz48ugf8mv30ULPxpyfq0AFzmy4b5fKLmgKxmvqEpv--5RcYPHcswDuKfWFAwHNKnDNanRm1f1f1PHKAnbmknYnY0A78uZFEpywxpyfq0ZP1TjcqnfKWIA_q0ZIG5Hm0mywxT1dbmhfzmHuBuWw-PWbYmWnsg100mgKsmv7YuNqGujY0IgF_gv7sTAP9IANxpyfq0AkBTdqGujY0mMN1py4-TLPxpyfq0AwGTLwzpyPYgv-b5fK9mLwGIhNxmgKs5fK9mLwGIhNxmv7YuyIETMbq0AuGTMPYgv-Y5fK1uyPEUhwxpgfq0ZKCUv4-5H00mvkomgwYTjdWpA7zuvR0Tv9EI1Ys0AP_pyPo5HD0UMfqn6KETZwxIZ-suHYk0A7WIjYk0Z7YUHYkPHRsnHmvrjns0ZFW5fKzmy4o5H00XjYs0ZKzUvfq0AFMIZ0qnfKGIMwz5H00ugFsmvqbuHdfnWTYnsK9mLwGIh7YuHYs0Aw1TA-b5Hm0TLFWgLIG5HDv0ZKWIMcqn0KMuy4bugcqnW0k0A7MuHYkrHc0mMub5H00mywzuHYs0A7bTdqYXgK-5H00mLFW5HndrH6L00" target="_blank" style="">同业圆通，北京展览展会服务专业厂家</a>
</div>
<div class="baiduimageplus-s-pa-bd">
<a class="baiduimageplus-s-pa-img " href="http://m.baidu.com/mobads.php?Kf0000a4OWr9Ai5tH5Q7olcDb1qFpaRXzuEb-R1Y-9cFX5Q4kdNwXm0UtJYxjlQ4YeFNbJhBo2R6eGjx7cqK-l4rwhf_KOxcMFulFm-9q_KmPFTe9xF0HjKNl0x3kI_kTHSRXdSuCU7AbiOyRTFhlH_A6yIFYkjBTQztM3d2r1IYtoVCJf.7R_a6ePCHCsnkRZubQDk3eonMWgYvT_rrumuCyn-h1_LJ0.pywW5y4Jnjc0mLKGujY0uh-zTLwxIZF9uARqn0K1uyPEUhwxIZF9uARqn0KsThqvpy4WuHYs0APGIZbqn0KWpAdb5HD0TvPCUyfqnfK1TjYk0ZI_5H00mv99Uh4-UjYs0ZN1ugFxIZ-suHYk0AN3mv99UhI-gLw4TARqn0KVmgwWp7qWUvw-5H00mywWUA71T1Ys0Zwd5gRkrHf3rjDd0ZwV5HcLnjm3PHf4P6KYujYs0Zw9TWYs0ZP1TjYd0Au85HTdnjcLnHmsgvPsT6KYIZ0qnfK8IZws5HD0mMcqnHc0uANvpyP-gv-b5HD0uZws5HD0IgF_5y9YIZ0lQzqLILT8my4MIyk9ThG1Qh4-Ia4WUBqYIgwETh-9UatkPa4CIAd_0APC5H00uh4z5H00Tv3qfWfdnWKDwb7anbu7PRDswRckwWPjPjndnDmzwWD1f1f0mgwEUNqGujYs0Ad-uA-9gLw4TARqn6K8UL0q0A7sgv-b5fKbuguxIZ0q0ZPbp1Y0TvwogLmq0AwWgLF-TNqspvTq0AwWgvPdpyfq0A7WmLfq0A7sTA-b5y78uLN_mgFJTz48ugf8mv30ULPxpyfq0AFzmy4b5fKLmgKxmvqEpv--5RcYPHcswDuKfWFAwHNKnDNanRm1f1f1PHKAnbmknYnY0A78uZFEpywxpyfq0ZP1TjcqnfKWIA_q0ZIG5Hm0mywxT1dbmhfzmHuBuWw-PWbYmWnsg100mgKsmv7YuNqGujY0IgF_gv7sTAP9IANxpyfq0AkBTdqGujY0mMN1py4-TLPxpyfq0AwGTLwzpyPYgv-b5fK9mLwGIhNxmgKs5fK9mLwGIhNxmv7YuyIETMbq0AuGTMPYgv-Y5fK1uyPEUhwxpgfq0ZKCUv4-5H00mvkomgwYTjdWpA7zuvR0Tv9EI1Ys0AP_pyPo5HD0UMfqn6KETZwxIZ-suHYk0A7WIjYk0Z7YUHYkPHRsnHmvrjns0ZFW5fKzmy4o5H00XjYs0ZKzUvfq0AFMIZ0qnfKGIMwz5H00ugFsmvqbuHdfnWTYnsK9mLwGIh7YuHYs0Aw1TA-b5Hm0TLFWgLIG5HDv0ZKWIMcqn0KMuy4bugcqnW0k0A7MuHYkrHc0mMub5H00mywzuHYs0A7bTdqYXgK-5H00mLFW5HndrH6L00" data-log="2" data-mid="" target="_blank">
<img src="./19.AngularJS $location_files/4b7788d933a2c8f1892f3df48a660d71.jpg">
</a>
<div class="baiduimageplus-s-pa-txt">
<p class="baiduimageplus-s-pa-title">
<a data-log="2" data-mid="" href="http://m.baidu.com/mobads.php?Kf0000a4OWr9Ai5tH5Q7olcDb1qFpaRXzuEb-R1Y-9cFX5Q4kdNwXm0UtJYxjlQ4YeFNbJhBo2R6eGjx7cqK-l4rwhf_KOxcMFulFm-9q_KmPFTe9xF0HjKNl0x3kI_kTHSRXdSuCU7AbiOyRTFhlH_A6yIFYkjBTQztM3d2r1IYtoVCJf.7R_a6ePCHCsnkRZubQDk3eonMWgYvT_rrumuCyn-h1_LJ0.pywW5y4Jnjc0mLKGujY0uh-zTLwxIZF9uARqn0K1uyPEUhwxIZF9uARqn0KsThqvpy4WuHYs0APGIZbqn0KWpAdb5HD0TvPCUyfqnfK1TjYk0ZI_5H00mv99Uh4-UjYs0ZN1ugFxIZ-suHYk0AN3mv99UhI-gLw4TARqn0KVmgwWp7qWUvw-5H00mywWUA71T1Ys0Zwd5gRkrHf3rjDd0ZwV5HcLnjm3PHf4P6KYujYs0Zw9TWYs0ZP1TjYd0Au85HTdnjcLnHmsgvPsT6KYIZ0qnfK8IZws5HD0mMcqnHc0uANvpyP-gv-b5HD0uZws5HD0IgF_5y9YIZ0lQzqLILT8my4MIyk9ThG1Qh4-Ia4WUBqYIgwETh-9UatkPa4CIAd_0APC5H00uh4z5H00Tv3qfWfdnWKDwb7anbu7PRDswRckwWPjPjndnDmzwWD1f1f0mgwEUNqGujYs0Ad-uA-9gLw4TARqn6K8UL0q0A7sgv-b5fKbuguxIZ0q0ZPbp1Y0TvwogLmq0AwWgLF-TNqspvTq0AwWgvPdpyfq0A7WmLfq0A7sTA-b5y78uLN_mgFJTz48ugf8mv30ULPxpyfq0AFzmy4b5fKLmgKxmvqEpv--5RcYPHcswDuKfWFAwHNKnDNanRm1f1f1PHKAnbmknYnY0A78uZFEpywxpyfq0ZP1TjcqnfKWIA_q0ZIG5Hm0mywxT1dbmhfzmHuBuWw-PWbYmWnsg100mgKsmv7YuNqGujY0IgF_gv7sTAP9IANxpyfq0AkBTdqGujY0mMN1py4-TLPxpyfq0AwGTLwzpyPYgv-b5fK9mLwGIhNxmgKs5fK9mLwGIhNxmv7YuyIETMbq0AuGTMPYgv-Y5fK1uyPEUhwxpgfq0ZKCUv4-5H00mvkomgwYTjdWpA7zuvR0Tv9EI1Ys0AP_pyPo5HD0UMfqn6KETZwxIZ-suHYk0A7WIjYk0Z7YUHYkPHRsnHmvrjns0ZFW5fKzmy4o5H00XjYs0ZKzUvfq0AFMIZ0qnfKGIMwz5H00ugFsmvqbuHdfnWTYnsK9mLwGIh7YuHYs0Aw1TA-b5Hm0TLFWgLIG5HDv0ZKWIMcqn0KMuy4bugcqnW0k0A7MuHYkrHc0mMub5H00mywzuHYs0A7bTdqYXgK-5H00mLFW5HndrH6L00" target="_blank" style="">同业圆通，北京展览展会服务专业厂家</a>
</p>
<p class="baiduimageplus-s-pa-desc" style="height:36px;white-space:normal;">
<a id="w-qbja06-desc" data-log="2" data-mid="" href="http://m.baidu.com/mobads.php?Kf0000a4OWr9Ai5tH5Q7olcDb1qFpaRXzuEb-R1Y-9cFX5Q4kdNwXm0UtJYxjlQ4YeFNbJhBo2R6eGjx7cqK-l4rwhf_KOxcMFulFm-9q_KmPFTe9xF0HjKNl0x3kI_kTHSRXdSuCU7AbiOyRTFhlH_A6yIFYkjBTQztM3d2r1IYtoVCJf.7R_a6ePCHCsnkRZubQDk3eonMWgYvT_rrumuCyn-h1_LJ0.pywW5y4Jnjc0mLKGujY0uh-zTLwxIZF9uARqn0K1uyPEUhwxIZF9uARqn0KsThqvpy4WuHYs0APGIZbqn0KWpAdb5HD0TvPCUyfqnfK1TjYk0ZI_5H00mv99Uh4-UjYs0ZN1ugFxIZ-suHYk0AN3mv99UhI-gLw4TARqn0KVmgwWp7qWUvw-5H00mywWUA71T1Ys0Zwd5gRkrHf3rjDd0ZwV5HcLnjm3PHf4P6KYujYs0Zw9TWYs0ZP1TjYd0Au85HTdnjcLnHmsgvPsT6KYIZ0qnfK8IZws5HD0mMcqnHc0uANvpyP-gv-b5HD0uZws5HD0IgF_5y9YIZ0lQzqLILT8my4MIyk9ThG1Qh4-Ia4WUBqYIgwETh-9UatkPa4CIAd_0APC5H00uh4z5H00Tv3qfWfdnWKDwb7anbu7PRDswRckwWPjPjndnDmzwWD1f1f0mgwEUNqGujYs0Ad-uA-9gLw4TARqn6K8UL0q0A7sgv-b5fKbuguxIZ0q0ZPbp1Y0TvwogLmq0AwWgLF-TNqspvTq0AwWgvPdpyfq0A7WmLfq0A7sTA-b5y78uLN_mgFJTz48ugf8mv30ULPxpyfq0AFzmy4b5fKLmgKxmvqEpv--5RcYPHcswDuKfWFAwHNKnDNanRm1f1f1PHKAnbmknYnY0A78uZFEpywxpyfq0ZP1TjcqnfKWIA_q0ZIG5Hm0mywxT1dbmhfzmHuBuWw-PWbYmWnsg100mgKsmv7YuNqGujY0IgF_gv7sTAP9IANxpyfq0AkBTdqGujY0mMN1py4-TLPxpyfq0AwGTLwzpyPYgv-b5fK9mLwGIhNxmgKs5fK9mLwGIhNxmv7YuyIETMbq0AuGTMPYgv-Y5fK1uyPEUhwxpgfq0ZKCUv4-5H00mvkomgwYTjdWpA7zuvR0Tv9EI1Ys0AP_pyPo5HD0UMfqn6KETZwxIZ-suHYk0A7WIjYk0Z7YUHYkPHRsnHmvrjns0ZFW5fKzmy4o5H00XjYs0ZKzUvfq0AFMIZ0qnfKGIMwz5H00ugFsmvqbuHdfnWTYnsK9mLwGIh7YuHYs0Aw1TA-b5Hm0TLFWgLIG5HDv0ZKWIMcqn0KMuy4bugcqnW0k0A7MuHYkrHc0mMub5H00mywzuHYs0A7bTdqYXgK-5H00mLFW5HndrH6L00" target="_blank" style="">同业圆通是一家北京展览展会服务专业厂家,</a>
</p>
<p class="baiduimageplus-s-pa-links">
</p>
</div>
<a class="baiduimageplus-s-pa-bt" id="w-qbja06-lookbtnshake" data-log="2" data-mid="" href="http://m.baidu.com/mobads.php?Kf0000a4OWr9Ai5tH5Q7olcDb1qFpaRXzuEb-R1Y-9cFX5Q4kdNwXm0UtJYxjlQ4YeFNbJhBo2R6eGjx7cqK-l4rwhf_KOxcMFulFm-9q_KmPFTe9xF0HjKNl0x3kI_kTHSRXdSuCU7AbiOyRTFhlH_A6yIFYkjBTQztM3d2r1IYtoVCJf.7R_a6ePCHCsnkRZubQDk3eonMWgYvT_rrumuCyn-h1_LJ0.pywW5y4Jnjc0mLKGujY0uh-zTLwxIZF9uARqn0K1uyPEUhwxIZF9uARqn0KsThqvpy4WuHYs0APGIZbqn0KWpAdb5HD0TvPCUyfqnfK1TjYk0ZI_5H00mv99Uh4-UjYs0ZN1ugFxIZ-suHYk0AN3mv99UhI-gLw4TARqn0KVmgwWp7qWUvw-5H00mywWUA71T1Ys0Zwd5gRkrHf3rjDd0ZwV5HcLnjm3PHf4P6KYujYs0Zw9TWYs0ZP1TjYd0Au85HTdnjcLnHmsgvPsT6KYIZ0qnfK8IZws5HD0mMcqnHc0uANvpyP-gv-b5HD0uZws5HD0IgF_5y9YIZ0lQzqLILT8my4MIyk9ThG1Qh4-Ia4WUBqYIgwETh-9UatkPa4CIAd_0APC5H00uh4z5H00Tv3qfWfdnWKDwb7anbu7PRDswRckwWPjPjndnDmzwWD1f1f0mgwEUNqGujYs0Ad-uA-9gLw4TARqn6K8UL0q0A7sgv-b5fKbuguxIZ0q0ZPbp1Y0TvwogLmq0AwWgLF-TNqspvTq0AwWgvPdpyfq0A7WmLfq0A7sTA-b5y78uLN_mgFJTz48ugf8mv30ULPxpyfq0AFzmy4b5fKLmgKxmvqEpv--5RcYPHcswDuKfWFAwHNKnDNanRm1f1f1PHKAnbmknYnY0A78uZFEpywxpyfq0ZP1TjcqnfKWIA_q0ZIG5Hm0mywxT1dbmhfzmHuBuWw-PWbYmWnsg100mgKsmv7YuNqGujY0IgF_gv7sTAP9IANxpyfq0AkBTdqGujY0mMN1py4-TLPxpyfq0AwGTLwzpyPYgv-b5fK9mLwGIhNxmgKs5fK9mLwGIhNxmv7YuyIETMbq0AuGTMPYgv-Y5fK1uyPEUhwxpgfq0ZKCUv4-5H00mvkomgwYTjdWpA7zuvR0Tv9EI1Ys0AP_pyPo5HD0UMfqn6KETZwxIZ-suHYk0A7WIjYk0Z7YUHYkPHRsnHmvrjns0ZFW5fKzmy4o5H00XjYs0ZKzUvfq0AFMIZ0qnfKGIMwz5H00ugFsmvqbuHdfnWTYnsK9mLwGIh7YuHYs0Aw1TA-b5Hm0TLFWgLIG5HDv0ZKWIMcqn0KMuy4bugcqnW0k0A7MuHYkrHc0mMub5H00mywzuHYs0A7bTdqYXgK-5H00mLFW5HndrH6L00" target="_blank" style="top: 20px;">去看看</a>
</div>
</div>
<a class="baiduimageplus-s-pa-adslogo" id="w-qbja06-baidu-adslogo" title="百度网盟推广" href="http://wangmeng.baidu.com/" target="_blank" data-ignore=""></a>
<div class="baiduimageplus-s-pa-adstext" id="w-qbja06-baidu-adstext"></div>
</div>
</div>
</div>
<a class="ad-widget-imageplus-sticker-close " href="http://www.angularjs.net.cn/tutorial/14.html#" id="w-ruq6m6-close" style="display: none;">X</a>
</div>
<div class="ad-widget-imageplus-sticker-thumbnail" id="w-ruq6m6-thumbnail" style="display: none; top: 291px;">
<a href="http://www.angularjs.net.cn/tutorial/14.html#" title="点击展开"><i>&nbsp;</i>图片相关信息</a>
</div></div></div></body></html>